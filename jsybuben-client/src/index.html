<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>jsybuben</title>
        <link rel="stylesheet" href="./lib/leaflet/leaflet.css" />
        <link rel="stylesheet" href="./lib/dijit/themes/claro/claro.css" />
        <style>
            #mapArea {
                height:512px;
                width:512px;
            }
        </style>
    </head>
    <body class="claro">
        <script src="./dojoConfig.js"></script>
        <script src="./lib/dojo/dojo.js"></script>
        <script>
            require([
                "dojo/dom",
                "dojo/on",
                "jsybuben/jsybuben",
                "leaflet/leaflet",
                "dojo/domReady!"
            ], function(dom, on, jsybuben, leaflet) {
                // jsybuben
                var sourceTextArea = dom.byId("sourceTextArea");
                var conversionButton = dom.byId("conversionButton");
                var targetTextArea = dom.byId("targetTextArea");
                on(conversionButton, "click", function(e) {
                    var sourceText = sourceTextArea.value;
                    var convertedText = jsybuben.to_aybuben(sourceText);
                    targetTextArea.value = convertedText;
                });
                // leaflet
                var mymap = leaflet.map('mapArea', {center:[40.159167,44.509167], zoom: 10});
                var lyrOSM = leaflet.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
                mymap.addLayer(lyrOSM);
            });
            require(["dojo/parser", "dijit/layout/TabContainer", "dijit/layout/ContentPane"]);
        </script>
        <div>
            <div data-dojo-type="dijit/layout/TabContainer" style="width: 100%;" doLayout="false">
                <div data-dojo-type="dijit/layout/ContentPane" title="editor" data-dojo-props="selected:true">
                    <div id="conversionArea">
                        <table>
                            <tr>
                                <td><textarea id="sourceTextArea"></textarea></td>
                                <td><button id="conversionButton">&gt;&gt;</button></td>
                                <td><textarea id="targetTextArea"></textarea></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div data-dojo-type="dijit/layout/ContentPane" title="map">
                    <div id="mapArea"></div>
                </div>
            </div>
        </div>
    </body>
</html>
